<xml xmlns="https://developers.google.com/blockly/xml"><block type="pxt-on-start" id="SL@Ue{D!Pamj[GAm]plf" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="!^CS{y5zFo:K):#xSBsH" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace NewtonovyZakony{" line1="" line2="    //% block=&quot;Spustí odeílatele skupina_rádia: %radioGroup, Osa_akcelerometru: %dimension, popis_hodnoty: %popis_hodnoty, rychlost_motoru: %rychlost_motoru, Pauza_mezi_merenimi(ms): %t_pause, Počet hodnot v klouzavém průměru: %avg_count, Rozsah měřených hodnot: %range&quot;" line3="    export function spustOdesilatele(radioGroup: number, dimension: Dimension, popis_hodnoty:string, rychlost_motoru:number, t_pause?: number, avg_count?: number, range?: AcceleratorRange){" line4="" line5="        let prubezna_hodnota = 0;" line6="        let hodnota_zrychleni = 0;" line7="        let index = 0" line8="        let pole_hodnot: any[] = [];" line9="        let posledni_hodnota = 0;" line10="" line11="        if (!range) range = AcceleratorRange.OneG;" line12="        if (!t_pause) t_pause = 50;" line13="" line14="        radio.setGroup(radioGroup);" line15="        input.setAccelerometerRange(range)" line16="" line17="        control.inBackground(function(){" line18="" line19="            while (true) {" line20="" line21="                let hodnota = input.acceleration(dimension)" line22="                //if (Math.abs(hodnota - posledni_hodnota) &lt; 10) hodnota = posledni_hodnota;" line23="" line24="                posledni_hodnota = hodnota;" line25="" line26="" line27="                if(false){ // klouzavý průměr" line28="" line29="                    pole_hodnot[index] = hodnota;" line30="" line31="                    if (index &gt;= avg_count) index = 0;" line32="" line33="                    let suma = 0" line34="                    for (let i = 0; i &lt; pole_hodnot.length; i++) suma += pole_hodnot[i]" line35="                    hodnota_zrychleni = suma / pole_hodnot.length;" line36="" line37="                }else if(false){ // lowpass" line38="" line39="                    pole_hodnot[index] = hodnota;" line40="" line41="                    if (index &lt; avg_count) index++;" line42="                    else pole_hodnot.shift();" line43="" line44="                    let smoothing = 10; // koeficient vyhlazení" line45="" line46="                    let value = pole_hodnot[0]; // start with the first input" line47="                    for (let j = 1, len = pole_hodnot.length; j &lt; len; j++) {" line48="                        value += (pole_hodnot[j] - value) / smoothing;" line49="                    }" line50="" line51="                    hodnota_zrychleni = value;" line52="                }else{" line53="" line54="                    //let smoothing = 10; // koeficient vyhlazení = avg_count" line55="                    prubezna_hodnota += (hodnota - prubezna_hodnota) / avg_count;" line56="                    hodnota_zrychleni = prubezna_hodnota;" line57="                    " line58="                }" line59="                pause(10);" line60="            }" line61="        });" line62="        control.inBackground(function () {" line63="            while (true) {" line64="" line65="                radio.sendString(popis_hodnoty + &quot;:&quot; + Math.round(hodnota_zrychleni))" line66="                //serial.writeLine(popis_hodnoty + &quot;:&quot; + suma / pole_hodnot.length)" line67="                pause(t_pause);" line68="            }" line69="        })" line70="        " line71="        radio.onReceivedString(function(receivedString: string) {" line72="            " line73="            if (receivedString == 'GOGO'){" line74="" line75="                for(let k = 10; k &gt; 0; k--){" line76="" line77="                    wuKong.setAllMotor(rychlost_motoru/k, rychlost_motoru/k);" line78="                    pause(20);" line79="                }" line80="" line81="            }" line82="" line83="            if (receivedString == 'STOP') {" line84="                wuKong.setAllMotor(0, 0);" line85="            }" line86="        })" line87="" line88="    }" line89="" line90="    //% block=&quot;Spustí Příjemce a ovladač skupina_rádia: %radioGroup&quot;" line91="    export function spustPrijemce(radioGroup: number){" line92="" line93="        let prijato = false;" line94="" line95="        radio.onReceivedString(function (receivedString) {" line96="            serial.writeLine(receivedString)" line97="            prijato = true;" line98="        })" line99="        radio.setGroup(radioGroup)" line100="        serial.redirectToUSB()" line101="" line102="        control.runInParallel(function () {" line103="" line104="            while (true){" line105="" line106="                if (prijato){" line107="" line108="                    led.plot(0, 0)" line109="                    pause(100);" line110="                    prijato = false;" line111="                }else{" line112="" line113="                    led.unplot(0, 0);" line114="                    pause(100);" line115="                }" line116="            }" line117="" line118="        });" line119="" line120="        " line121="        input.onButtonPressed(Button.A, function () {" line122="            radio.sendString('GOGO');" line123="        })" line124="" line125="        input.onButtonPressed(Button.B, function () {" line126="            radio.sendString('STOP');" line127="        })" line128="    }" line129="" line130="}" numlines="131"></mutation></block></statement></block></xml>